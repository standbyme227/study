# HTTPS

## 상황설명

> 현재 Docker 와 AWS(EB, EC2, AURORA, ELB)를 활용해서  
서버를 배포시켜놓은 상태이다.  
도메인은 적용되지 않았고 / SSL도 적용되지 않았다.

## 예상과정

> route53으로 도메인을 생성.  
> ACM으로 인증을 발급받아서 SSL이 가능하도록 처리
> ELB에 적용
> Django app nginx setting에서 Domain 적용
> EB nginx에서 http를 https로 자동적으로 변경하도록 적용
> 끝

## 문제상황

1. Domain을 생성하는데에는 어려움이 없음.  
2. 인증서를 적용시키는 과정에서 Email인증을 선택.
    - 인증하는데 72시간 걸림.....
    - DNS인증으로 변경 (30분 안쪽)
3. ELB에 적용을 시킨뒤,  
django app에서도 손을 봤지만 접속불가.

4. eb nginx의 문제라고 판단해서, (예상과정 중) 다섯번째 부분 적용.

5. 여전히 접속불가상태 확인.

## 문제발견 및 수정.

> eb를 이용한 배포시에  
그 기준이 되는 기준점을 정할 수 있는데  
현재 우리는 Docker파일을 그 기준으로 하고있다.  

> 개발을 하면서 여러가지 환경을 나누게되는데  
크게 local, dev, production으로 (로컬, 개발, 배포)  
환경으로 나누는 것을 나도 따라 나누고있다.  

> 배포되는 Docker파일에는 당연히 production의 환경부분이 세팅되었는데  
나는 계속 local 환경의 부분을 수정하고 있으니  
배포이후에 적용이 안되었던건 당연했다.  

> 약간은 어이없었지만, 역시나 꼼꼼히 스텝별로 밟아봐야 한다는걸  
다시 한 번 더 깨닫는 순간이었다.  
